# Lefthook configuration for commitment
# This config allows commitment to dogfood itself

pre-commit:
  parallel: false
  commands:
    lint:
      run: bun run lint
      stage_fixed: true
    build:
      run: bun run build

prepare-commit-msg:
  skip:
    - merge
    - rebase
  commands:
    commitment:
      # Only run for regular commits (not merge, squash, or when message specified)
      # {1} is the commit message file, {2} is the commit source
      run: '[ -z "{2}" ] && ./dist/cli.js --message-only > {1} || true'
      interactive: true
